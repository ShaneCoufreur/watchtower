build:
  main: ./main.go
  goos:
    - linux
    - windows
  goarch:
    - amd64
    - arm
    - arm64
archive:
  name_template: "{{.ProjectName}}_{{.Os}}_{{.Arch}}"
  format: tar.gz
  replacements:
    arm: armhf
    arm64: arm64v8
    amd64: amd64
    386: 386
    darwin: macOS
    linux: linux
  format_overrides:
    - goos: windows
      format: zip
  files:
    - LICENSE.md
dockers:
  -
    goos: linux
    goarch: amd64
    goarm: ''
    dockerfile: dockerfile/amd64/Dockerfile
    build_flag_templates:
      - "--label=com.centurylinklabs.watchtower=true"
    image_templates:
      - containrrr/watchtower:{{ .Version }}
    binaries:
      - watchtower
  -
    goos: linux
    goarch: arm
    goarm: 6
    dockerfile: dockerfile/armhf/Dockerfile
    build_flag_templates:
      - "--label=com.centurylinklabs.watchtower=true"
    image_templates:
      - containrrr/watchtower:armhf-{{ .Version }}
    binaries:
      - watchtower
  -
    goos: linux
    goarch: arm64
    goarm: ''
    dockerfile: dockerfile/arm64v8/Dockerfile
    build_flag_templates:
      - "--label=com.centurylinklabs.watchtower=true"
    image_templates:
      - containrrr/watchtower:arm64v8-{{ .Version }}
    binaries:
      - watchtower